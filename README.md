# üöÄ nginx-domain-provisioner

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –Ω–∞ VDS —Å **Nginx** –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º–∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ (**Let‚Äôs Encrypt, Certbot**).  

–ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É:
- —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–∞;
- –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç;
- –≤—ã–¥–∞—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç;
- –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å **IP-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é**.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îî‚îÄ‚îÄ nginx-domain-provisioner/
    ‚îú‚îÄ‚îÄ add_subdomain.sh             # –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
    ‚îú‚îÄ‚îÄ includes/
    ‚îÇ   ‚îú‚îÄ‚îÄ allowed_ips.conf          # —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö IP
    ‚îÇ   ‚îî‚îÄ‚îÄ no_ip_restriction.conf    # –ø—É—Å—Ç–æ–π include (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
    ‚îî‚îÄ‚îÄ README.md                     # –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```


**‚ö°Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤.
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS —Å Certbot.
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx.
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è IP-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (`allow/deny`).
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–ª—é–±—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –∏ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤**.
- ‚úÖ –£–¥–æ–±–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–¥–æ–º–µ–Ω–∞ + —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞).

**üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞**

–ù–∞ **Ubuntu 20.04/22.04/24.04**:

```bash
# –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/yourname/nginx-domain-provisioner.git
cd nginx-domain-provisioner
chmod +x add_subdomain.sh
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å—Ç–æ—è—Ç):

```bash
sudo apt update
sudo apt install nginx snapd -y
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
```
